# FreeHekim RAG API Configuration (Example)
# IMPORTANT: Do NOT commit real secrets. Keep this file OUTSIDE the repo in production.
# Recommended secure path: /etc/freehekim-rag/.env (chmod 640, group: ragsvc)

# Environment
ENV=staging  # production | staging | development

# Qdrant Configuration
QDRANT_HOST=localhost           # localhost when using local container
QDRANT_PORT=6333                # 443 for HTTPS (remote), 6333 for local HTTP
QDRANT_API_KEY=your_client_qdrant_api_key_here   # used by API client
# Enforce API key on the Qdrant server (container). If set, REST requires header: api-key: <value>
# If you prefer, you may reuse the same value as QDRANT_API_KEY
QDRANT__SERVICE__API_KEY=your_server_qdrant_api_key_here

# OpenAI Configuration
OPENAI_API_KEY=sk-proj-...your_openai_key_here
OPENAI_EMBEDDING_MODEL=text-embedding-3-small  # 1536 dimensions

# LLM Configuration
LLM_MODEL=gpt-4
LLM_TEMPERATURE=0.3
LLM_MAX_TOKENS=800

# Embedding Provider
EMBED_PROVIDER=openai  # or bge-m3 (not fully implemented; falls back to openai)

# API Configuration (optional)
API_PORT=8080
API_HOST=127.0.0.1

# Logging
LOG_LEVEL=INFO
LOG_JSON=false

# RAG Pipeline Tuning
SEARCH_TOPK=5
PIPELINE_MAX_CONTEXT_CHUNKS=5
PIPELINE_MAX_SOURCE_DISPLAY=3
PIPELINE_MAX_SOURCE_TEXT_LENGTH=200

# Protections
RATE_LIMIT_PER_MINUTE=60
MAX_BODY_SIZE_BYTES=1048576

# Qdrant Client
QDRANT_TIMEOUT=10.0

# Caching
ENABLE_CACHE=true
CACHE_TTL_SECONDS=300

# API Key Protection (optional)
REQUIRE_API_KEY=false
API_KEY=your_api_key_here

# Uvicorn
UVICORN_WORKERS=2

# Deployment (optional)
# Pin the image tag used by docker compose (default: dev)
# IMAGE_TAG=v2.2.2

# Locale (optional; container may not ship full locales)
# LANG=en_US.UTF-8

# Monitor (optional; used by deployment/scripts/health_monitor.sh)
# MONITOR_URL_HEALTH=https://your.public.domain/health
# MONITOR_URL_READY=http://127.0.0.1:8080/ready
# MONITOR_CONSECUTIVE_FAILS=3
# MONITOR_QUIET_START=00:00
# MONITOR_QUIET_END=07:00
# MONITOR_SUPPRESS_ALERTS_DURING_QUIET=true
# ALERT_TELEGRAM_BOT_TOKEN=...
# ALERT_TELEGRAM_CHAT_ID=...
# ALERT_SLACK_WEBHOOK=https://hooks.slack.com/services/...

# Testing only: when set to true, the app ignores any local .env file
# FREEHEKIM_IGNORE_ENV_FILE=false
