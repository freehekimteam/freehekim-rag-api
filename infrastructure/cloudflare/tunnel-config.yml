# Cloudflare Tunnel Configuration
# FreeHekim RAG API

# Tunnel credentials (will be auto-generated by cloudflared)
# Run: cloudflared tunnel create freehekim-rag

tunnel: YOUR_TUNNEL_ID
credentials-file: /home/freehekim/.cloudflared/YOUR_TUNNEL_ID.json

# Ingress rules
ingress:
  # Main API endpoint
  - hostname: rag.hakancloud.com
    service: http://localhost:8080
    originRequest:
      noTLSVerify: false
      connectTimeout: 30s
      tcpKeepAlive: 30s

  # Prometheus metrics (internal only, restrict by Cloudflare Access)
  - hostname: metrics.hakancloud.com
    service: http://localhost:9090
    originRequest:
      noTLSVerify: true

  # Grafana dashboard (internal only, restrict by Cloudflare Access)
  - hostname: grafana.hakancloud.com
    service: http://localhost:3000
    originRequest:
      noTLSVerify: true

  # Catch-all rule (must be last)
  - service: http_status:404

# Logging
loglevel: info
logfile: /var/log/cloudflared.log

# Auto-update cloudflared
autoupdate-freq: 24h

# Retry settings
retries: 5

# Connection pool
max-connections: 4
